# COSTAATT HR Performance Gateway - Apache Configuration
# Place this file in your Apache conf directory (usually C:\Apache24\conf\extra\ or C:\xampp\apache\conf\extra\)

<VirtualHost *:80>
    ServerName costaatt-hr.local
    ServerAlias 10.2.1.27
    
    # Frontend (React/Vite) - Proxy to port 5173
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Proxy all requests to the frontend server
    ProxyPass / http://localhost:5173/
    ProxyPassReverse / http://localhost:5173/
    
    # API requests go to backend
    ProxyPass /api/ http://localhost:3000/
    ProxyPassReverse /api/ http://localhost:3000/
    
    # WebSocket support for Vite HMR
    ProxyPass /ws ws://localhost:5173/ws
    ProxyPassReverse /ws ws://localhost:5173/ws
    
    # Headers for proper proxying
    ProxyAddHeaders On
    ProxyPreserveHost On
    
    # Logging
    ErrorLog logs/costaatt-hr_error.log
    CustomLog logs/costaatt-hr_access.log common
</VirtualHost>

# HTTPS Configuration (Optional - for production)
<VirtualHost *:443>
    ServerName costaatt-hr.local
    ServerAlias 10.2.1.27
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile "conf/ssl/costaatt-hr.crt"
    SSLCertificateKeyFile "conf/ssl/costaatt-hr.key"
    
    # Frontend (React/Vite) - Proxy to port 5173
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Proxy all requests to the frontend server
    ProxyPass / http://localhost:5173/
    ProxyPassReverse / http://localhost:5173/
    
    # API requests go to backend
    ProxyPass /api/ http://localhost:3000/
    ProxyPassReverse /api/ http://localhost:3000/
    
    # WebSocket support for Vite HMR
    ProxyPass /ws wss://localhost:5173/ws
    ProxyPassReverse /ws wss://localhost:5173/ws
    
    # Headers for proper proxying
    ProxyAddHeaders On
    ProxyPreserveHost On
    
    # Logging
    ErrorLog logs/costaatt-hr_ssl_error.log
    CustomLog logs/costaatt-hr_ssl_access.log common
</VirtualHost>
